# 手动版本发布使用指南

## 🚀 如何手动发布APK

### 方法1：手动触发工作流（推荐）

1. **进入GitHub Actions页面**
   - 访问您的仓库
   - 点击"Actions"标签页
   - 选择"Build Android APK"工作流

2. **点击"Run workflow"按钮**
   - 在右侧会出现一个表单

3. **填写发布信息**
   - **版本号** (必填): 例如 `1.0.0`, `2.1.3`, `1.0.0-beta`
   - **发布说明** (可选): 本次更新的详细说明
   - **创建GitHub Release**: 勾选此项将自动创建Release

4. **点击"Run workflow"开始构建**

### 方法2：使用Git标签（传统方式）

```bash
# 创建并推送标签
git tag v1.0.0
git push origin v1.0.0
```

## 📋 版本号命名规范

推荐使用语义化版本号 (Semantic Versioning)：

- **主版本号.次版本号.修订号** (例如: `1.0.0`)
- **预发布版本** (例如: `1.0.0-beta`, `2.0.0-alpha.1`)
- **构建版本** (例如: `1.0.0+20231226`)

### 示例：
- `1.0.0` - 首个正式版本
- `1.1.0` - 新增功能
- `1.1.1` - 修复bug
- `2.0.0` - 重大更新，可能有不兼容的改动
- `1.2.0-beta` - 测试版本

## 🎯 构建产物说明

### APK文件命名规则：
- 手动版本: `yansd-music-v{版本号}.apk`
- 标签版本: `yansd-music-v{标签号}.apk`
- 构建版本: `yansd-music-build-{构建号}.apk`

### 构建产物位置：
1. **GitHub Actions Artifacts**: 每次构建都会上传
2. **GitHub Releases**: 仅在创建Release时上传

## 📝 发布说明最佳实践

### 格式建议：
```markdown
### 🆕 新功能
- 添加了xxx功能
- 支持xxx操作

### 🐛 问题修复
- 修复了xxx问题
- 解决了xxx崩溃

### ⚡ 性能优化
- 优化了xxx性能
- 减少了内存占用

### 📱 小米手机优化
- 改进了MIUI兼容性
- 优化了权限申请流程
```

## 🔄 工作流触发条件

| 触发方式 | 版本号来源 | 创建Release | 用途 |
|---------|------------|-------------|------|
| 手动触发 | 用户输入 | 可选 | 灵活发布 |
| 推送标签 | Git标签 | 自动 | 正式发布 |

## 💡 使用技巧

### 1. 测试构建
- 版本号使用如 `1.0.0-test`
- 不勾选"创建GitHub Release"
- 仅生成APK供测试

### 2. 正式发布
- 使用正式版本号如 `1.0.0`
- 勾选"创建GitHub Release"
- 填写详细的发布说明

### 3. 紧急修复
- 使用修订版本号如 `1.0.1`
- 在发布说明中注明修复内容

## 🚨 注意事项

1. **版本号唯一性**: 确保版本号不重复
2. **发布说明**: 详细描述更新内容，便于用户了解
3. **测试验证**: 发布前先进行测试构建
4. **小米手机**: 构建的APK已针对小米MIUI系统优化

## 📞 故障排除

### 构建失败
- 检查版本号格式是否正确
- 查看GitHub Actions日志

### Release创建失败
- 确保版本号（标签）不存在冲突
- 检查仓库权限设置

### APK安装问题
- 参考Release页面的详细安装说明
- 特别注意小米手机的权限设置
